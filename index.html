<!doctype html>
<html lang="ro">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Vlogul lui Razvan</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <main>
        <h1>Vlogul lui Razvan</h1>

        <!-- Auth local (parolă simplă) -->
        <div id="authControls">
            <button id="loginBtn" class="ghost">Autentificare</button>
            <button id="logoutBtn" class="ghost" style="display:none">Ieșire</button>
            <span id="who" class="muted"></span>
        </div>

        <!-- Bara de control -->
        <div class="toolbar">
            <input id="searchInput" type="search" placeholder="Caută titlu sau tag..." />
            <select id="tagFilter"><option value="">— Filtrează după tag —</option></select>
            <select id="sortSelect">
                <option value="newest">Noi → Vechi</option>
                <option value="oldest">Vechi → Noi</option>
                <option value="title">Titlu (A→Z)</option>
            </select>

            <span class="spacer"></span>

            <!-- admin local -->
            <button id="btnAdd" class="primary" hidden>+ Adaugă clip</button>
            <button id="btnExport" class="ghost" hidden>Export</button>
            <button id="importBtn" class="ghost" hidden>Import</button>
            <input id="importInput" type="file" accept="application/json" hidden />
        </div>

        <!-- Grilă clipuri -->
        <section id="grid" class="grid"></section>
        <div style="text-align:center;margin:1rem 0;">
            <button id="loadMore" class="ghost" hidden>Încarcă mai multe</button>
        </div>

        <!-- Dialog ADD/EDIT cu două opțiuni: Link / Upload -->
        <dialog id="addDialog">
            <form method="dialog">
                <h3 style="margin:.2rem 0">Clip nou / Editează</h3>

                <div class="seg" role="tablist" aria-label="Tip sursă">
                    <button type="button" id="tabLink" class="active" aria-selected="true">Link YouTube/.mp4</button>
                    <button type="button" id="tabUpload" aria-selected="false">Upload .mp4</button>
                </div>

                <!-- Panel: Link -->
                <section id="panelLink">
                    <label>Titlu <input id="titleInput" placeholder="Titlu clip" /></label>
                    <label>
                        URL (YouTube sau .mp4 găzduit)
                        <input id="urlInput" placeholder="https://www.youtube.com/watch?v=..." />
                    </label>
                    <div class="row">
                        <label>Data <input id="dateInput" type="date" /></label>
                        <label>Tag-uri (virgulă) <input id="tagsInput" placeholder="daily, vlog" /></label>
                    </div>
                    <label>
                        Descriere
                        <textarea id="descInput" rows="3" placeholder="(opțional)"></textarea>
                    </label>
                    <label class="row"><input type="checkbox" id="chkPublicLink"> Public</label>
                </section>

                <!-- Panel: Upload -->
                <section id="panelUpload" style="display:none">
                    <label>
                        Fișier .mp4 (se urcă în cloud)
                        <input id="fileInput" type="file" accept="video/mp4" />
                    </label>
                    <label class="row"><input type="checkbox" id="chkPublicUpload"> Public</label>
                    <div class="row">
                        <label>Titlu <input id="uTitleInput" placeholder="Titlu clip" /></label>
                        <label>Data <input id="uDateInput" type="date" /></label>
                    </div>
                    <label>Tag-uri (virgulă) <input id="uTagsInput" placeholder="daily, vlog" /></label>
                    <progress id="uploadProgress" value="0" max="100" hidden></progress>
                    <div id="uploadInfo" class="muted"></div>
                </section>

                <div style="display:flex;gap:.6rem;justify-content:flex-end">
                    <button class="ghost" value="cancel">Anulează</button>
                    <button id="saveBtn" class="primary">Salvează</button>
                </div>
            </form>
        </dialog>

        <!-- Template card -->
        <template id="cardTpl">
            <article class="card">
                <div class="media"></div>
                <div class="meta">
                    <h3 class="title"></h3>
                    <p class="date muted"></p>
                    <p class="desc"></p>
                    <div class="tags"></div>
                </div>
                <div class="cardActions">
                    <button class="mini" data-action="edit">Editează</button>
                    <button class="mini danger" data-action="delete">Șterge</button>
                </div>
            </article>
        </template>
    </main>

    <script type="module" src="app.js"></script>
</body>
</html>
