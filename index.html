<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vlogul lui Razvan</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <header class="topbar">
        <h1>Vlogul lui Razvan</h1>

        <div class="toolbar">
            <input id="searchInput" class="input" placeholder="Caută titlu sau tag..." />

            <select id="tagFilter" class="input">
                <option value="">— Filtrează după tag —</option>
            </select>

            <select id="sortSelect" class="input">
                <option value="newest">Noi → Vechi</option>
                <option value="oldest">Vechi → Noi</option>
                <option value="title">Titlu (A→Z)</option>
            </select>

            <span id="authBadge" class="muted"></span>
            <button id="authBtn" class="btn">Autentificare</button>

            <button id="btnAdd" class="btn primary">+ Adaugă clip</button>
            <button id="btnExport" class="btn">Export</button>
            <label class="btn">
                Import
                <input id="importInput" type="file" accept="application/json" hidden />
            </label>
        </div>
    </header>

    <main class="content">
        <div id="hint" class="hint" hidden>
            <!-- Dacă vrei să revii la bannerul de hint, scoate atributul hidden -->
            Sfat: pentru clipurile <b>.mp4 găzduite</b> folosește un link direct (nu din PC).
            Linkurile YouTube sunt ideale.
        </div>

        <div id="grid" class="grid"></div>

        <div class="center">
            <button id="loadMore" class="btn" hidden>Încarcă mai multe</button>
        </div>
    </main>

    <!-- Add / Edit dialog -->
    <dialog id="addDialog" class="dialog">
        <form method="dialog" class="dialogBody">
            <header class="dialogHeader">
                <h3 id="dlgTitle">Adaugă clip</h3>
                <nav class="tabs">
                    <button type="button" class="tab active" data-tab="link">Link YouTube / .mp4</button>
                    <button type="button" class="tab" data-tab="upload">Upload .mp4</button>
                </nav>
            </header>

            <!-- Panel: LINK -->
            <section id="panelLink">
                <label>
                    Titlu
                    <input id="titleInput" class="input" placeholder="Titlu clip" />
                </label>

                <label>
                    URL (YouTube sau .mp4 găzduit)
                    <input id="urlInput" class="input" placeholder="https://www.youtube.com/watch?v=..." />
                </label>

                <div class="row">
                    <label>
                        Data
                        <input id="dateInput" class="input" type="date" />
                    </label>
                    <label>
                        Tag-uri (virgulă)
                        <input id="tagsInput" class="input" placeholder="daily, vlog" />
                    </label>
                </div>

                <label>
                    Descriere
                    <textarea id="descInput" class="input" rows="3" placeholder="Detalii clip (opțional)"></textarea>
                </label>
            </section>

            <!-- Panel: UPLOAD -->
            <section id="panelUpload" style="display:none">
                <div id="dropZone"
                     class="dropZone"
                     tabindex="0"
                     aria-label="Trage fișierul .mp4 aici sau apasă pentru a-l alege">
                    <div class="dzIcon">⬆️</div>
                    <div class="dzText"><b>Trage aici fișierul .mp4</b> sau apasă pentru a-l alege din calculator</div>
                </div>

                <!-- input ascuns – îl declanșăm din JS -->
                <input id="fileInput" type="file" accept="video/mp4" hidden />

                <div class="row" style="margin-top:.8rem">
                    <label>
                        Titlu
                        <input id="uTitleInput" class="input" placeholder="Titlu clip" />
                    </label>
                    <label>
                        Data
                        <input id="uDateInput" class="input" type="date" />
                    </label>
                </div>

                <label>
                    Tag-uri (virgulă)
                    <input id="uTagsInput" class="input" placeholder="daily, vlog" />
                </label>

                <progress id="uploadProgress" value="0" max="100" hidden></progress>
                <div id="uploadInfo" class="muted"></div>
            </section>

            <footer class="dialogFooter">
                <button value="cancel" class="btn ghost">Anulează</button>
                <button id="saveBtn" value="default" class="btn primary">Salvează</button>
            </footer>
        </form>
    </dialog>

    <!-- Card template -->
    <template id="cardTpl">
        <article class="card">
            <div class="media"></div>
            <div class="meta">
                <h3 class="title"></h3>
                <p class="date muted"></p>
                <p class="desc"></p>
                <div class="tags"></div>
            </div>
            <div class="cardActions">
                <button class="mini" data-action="edit">Editează</button>
                <button class="mini danger" data-action="delete">Șterge</button>
            </div>
        </article>
    </template>

    <!-- Firebase + app -->
    <script type="module" src="app.js"></script>
</body>
</html>
